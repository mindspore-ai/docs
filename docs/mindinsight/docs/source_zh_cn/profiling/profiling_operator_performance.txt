算子性能分析
~~~~~~~~~~~~

使用算子性能分析组件可以对MindSpore运行过程中的各个算子的执行时间进行统计展示(包括AICORE、AICPU、HOSTCPU算子)。

- AICORE算子：AI Core 算子是昇腾 AI
  处理器计算核心的主要构成，负责执行向量和张量相关的计算密集型算子。TBE（Tensor
  Boost Engine）是一种在TVM（Tensor Virtual
  Machine）框架基础上扩展的算子开发工具，用户可使用 TBE 进行 AI Core
  算子信息注册。
- AICPU算子：AI CPU算子是AI CPU负责执行昇腾处理器中海思 SoC
  的CPU类算子（包括控制算子、标量和向量等通用计算）。MindSpore中同一个算子可能会同时拥有
  AI Core 算子和AI CPU算子，框架会优先选择 AI Core 算子，没有 AI Core
  算子或者不满足选择的场景下，会调用AI CPU算子。
- HOSTCPU算子：Host侧CPU主要负责将图或者算子下发到昇腾芯片，根据实际需求也可以在Host侧CPU上开发算子。HOSTCPU算子特指运行在Host侧CPU上的算子。

.. figure:: ./images/op_type_statistics.PNG
   :alt: op_type_statistics.png

*图：算子类别统计分析*

上图展示了按算子类别进行统计分析的结果，包含以下内容：

- 可以选择饼图/柱状图展示各算子类别的时间占比，每个算子类别的执行时间会统计属于该类别的算子执行时间总和。
- 统计前20个占比时间最长的算子类别，展示其时间所占的百分比以及具体的执行时间（毫秒）。

.. figure:: ./images/op_statistics.PNG
   :alt: op_statistics.png

*图：算子统计分析*

上图展示了算子性能统计表，包含以下内容：

- 选择全部：按单个算子的统计结果进行排序展示，展示维度包括算子名称、算子类型、算子执行时间、算子全称、算子信息等；默认按算子执行时间排序。
- 选择分类：按算子类别的统计结果进行排序展示，展示维度包括算子分类名称、算子类别执行时间、执行频次、占总时间的比例等。点击每个算子类别，可以进一步查看该类别下所有单个算子的统计信息。
- 搜索：在右侧搜索框中输入字符串，支持对算子名称/类别进行模糊搜索。
