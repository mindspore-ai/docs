# Environment Variable Descriptions

[![View Source On Gitee](https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/master/resource/_static/logo_source_en.svg)](https://gitee.com/mindspore/docs/blob/master/docs/mindformers/docs/source_en/appendix/env_variables.md)

This file describes MindFormers environment variables.

## Debugging Variables

| Variables Names                        | Default | Interpretations                                                                                        | Descriptions                                                                                                                                                                     |
| ------------------------------- | ------ | ------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **HCCL_DETERMINISTIC**          | false  | Whether to turn on the deterministic switch of the HCCL communication library to eliminate randomness introduced by inconsistent ordering of multi-card summation such as AllReduce. (affects performance) | `true`: turns on the HCCL deterministic switch;<br> `false`: turns off the HCCL deterministic switch.                                                                                                                    |
| **LCCL_DETERMINISTIC**          | 0      | Whether to turn on the deterministic behavior of the LCCL communication library                                                         | `1`: turns on the LCCL deterministic switch;<br>`0`: turns off the LCCL deterministic switch.                                                                                                                         |
| **CUSTOM_MATMUL_SHUFFLE**       | on     | Whether to enable shuffle operations for custom matrix multiplication.                                                          | `on`: turns on matrix shuffle;<br>`off`: turns off matrix shuffle.                                                                                                                                |
| **ASCEND_LAUNCH_BLOCKING**      | 0      | Whether to wait for all processes to be ready before starting a process. Thereby controlling the inference accuracy consistency.                                  | `1`: wait for all processes to be ready before starting the process;<br>`0`: start the process without waiting for all processes to be ready.                                                                                                   |
| **TE_PARALLEL_COMPILER**        | 8      | The number of threads on which the operator is compiled in parallel.                                                                      | Takes a positive integer; set to `1` for single-threaded compilation, simplifying problem debugging.                                                                                                         |
| **CPU_AFFINITY**                | 0      | Whether to turn on the CPU affinity switch, thus ensuring that each process or thread is bound to a single CPU core to improve performance.              | `1`: turn on the CPU affinity switch;<br>`0`: turn off the CPU affinity switch.                                                                                                                         |
| **LOG_MF_PATH**                 | NA     | MindFormers log save location.                                                                     | File path, support relative path and absolute path.                                                                                                                                             |
| **MS_MEMORY_STATISTIC**         | 0      | Memory destructuring.                                                                                    | `1`: turn on memory destructuring;<br>`0`: turn off memory destructuring.                                                                                                                             |
| **MINDSPORE_DUMP_CONFIG**       | NA      | Specifies the path to the configuration file on which the Dump function depends.                                                          | File path, support relative path and absolute path.                                                                                                                                       |
| **GLOG_v**                      | 2      | Controls the level of MindSpore logs.                                                                     | `0`: DEBUG <br>`1`: INFO <br>`2`: WARNING <br>`3`: ERROR: indicates that an error has been reported in the execution of the program, an error log is output, and the program may not be terminated;<br>`4`: CRITICAL, indicates that an exception has occurred in the execution of the program, and the execution of the program will be terminated. |
| **ASCEND_GLOBAL_LOG_LEVEL**     | 3      | Controls the logging level of CANN.                                                                          | `0`: DEBUG <br>`1`: INFO <br>`2`: WARNING <br>`3`: ERROR <br>`4`: CRITICAL                                                                                               |
| **ASCEND_SLOG_PRINT_TO_STDOUT** | 0      | Whether to display on the screen.                                                                    | `1`: Display on the screen <br>`0`: Do not display on the screen                                                                                                                                   |
| **ASCEND_GLOBAL_EVENT_ENABLE**  | 0      | Whether to enable event logging.                                                                       | `1`: turn on Event logging;<br>`0`: turn off Event logging.                                                                                                                                 |
| **HCCL_EXEC_TIMEOUT**           | 1800   | HCCL process execution synchronization wait time.                                                                    | Execute the synchronization wait time (s).                                                                                                                                                    |
| **HCCL_CONNECT_TIMEOUT**        | 120    | HCCL link setup timeout wait time.                                                                        | link setup wait time (s).                                                                                                                                                        |
| **MS_NODE_ID**        | NA    | Specifies process rank id in dynamic cluster scenarios. | The rank_id of the process, unique within the cluster. |

## Other Variables

| Variables Names                        | Default | Interpretations                                                                                        | Descriptions                                                                                                                                                     |
| ---------------------------------- | ----------- | ----------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **RUN_MODE**                       | predict     | Set the running mode.                            | `predict`: inference <br>`finetune`: Fine-tuning <br>`train`: Training <br>`eval`: Evaluation                                                                                            |
| **USE_ROPE_SELF_DEFINE**           | true        | Whether to enable customized ROPE.                    | `true`: enable customized ROPE;<br>`false`: disable customized ROPE.                                                                                                     |
| **MS_ENABLE_INTERNAL_BOOST**       | off         | Whether to turn on the internal acceleration of the MindSpore framework.     | `on`: turn on MindSpore internal acceleration;<br> `off`: turn off MindSpore internal acceleration.                                                                                               |
| **MS_GE_ATOMIC_CLEAN_POLICY**      | 1           | Whether to clean up the memory occupied by atomic operators in the network.  | `0`: centralized cleanup of memory occupied by all atomic operators in the network;<br>`1`: no centralized memory cleanup, individual zeroing of each atomic operator in the network.                                                  |
| **ENABLE_LAZY_INLINE**             | 1           | Whether to enable lazy inline.                     | `0`: turn off lazy inline;<br>`1`: turn on lazy inline.                                                                                                              |
| **ENABLE_LAZY_INLINE_NO_PIPELINE** | 0           | Whether to enable lazy inline under non-pipeline parallel. | `0`: turn off lazy inline;<br>`1`: turn on lazy inline.                                                                                                              |
| **MS_ASCEND_CHECK_OVERFLOW_MODE**  | INFNAN_MODE | Sets the overflow detection mode.                        | `SATURATION_MODE`: saturation mode, saturates to floating-point extremes (+-MAX) when the calculation overflows;<br> `INFNAN_MODE`: INF/NAN mode, follows the IEEE 754 standard, and outputs INF/NAN calculations as defined. |

For MindSpore related environment variables, refer to:

[MindSpore environment variables](https://www.mindspore.cn/docs/en/master/note/env_var_list.html)